
.. _throughput_benchmark:

============
消息吞吐测试
============

EMQ消息吞吐测试组合条件：

+--------------------------+-----------------------+------------------+-------------------+--------------+---------------+-------------+
|         QoS              |         Payload       | PUB连接 x Fan-In | SUB连接 X Fan-Out |  实际Fan-In  |  实际Fan-Out  |  背景连接   |
+========+========+========+========+======+=======+==================+===================+==============+===============+=============+
|   0    |   1    |    2   |  256B  |  1k  |  10K  |    C x Msg/s     |     C x Msg/s     |  Msg/s, Bps  |  Msg/s, Bps   |    100K     |
+--------+--------+--------+--------+------+-------+------------------+-------------------+--------------+---------------+-------------+

参数说明:

+-----------+-----------------------+
|  参数     |   说明                |
+-----------+-----------------------+
|  C        |   Connection连接数    |
+-----------+-----------------------+
|  Msg/s    |   每秒消息数量        |
+-----------+-----------------------+
|  Bps      |   网络吞吐            |
+-----------+-----------------------+

-------------------
QoS0 Fan-In消息吞吐
-------------------

测试客户端到EMQ服务器间的QoS0消息吞吐:

.. NOTE:: 本测试场景下无SUB客户端。

+--------------------------+-------+-----------+--------------------+---------------------+--------------+-------------+
|  组合场景ID              |  QoS  |  Payload  |  PUB连接 X Fan-In  |  SUB连接 X Fan-Out  |  实际Fan-In  |  背景连接   |
+==========================+=======+===========+====================+=====================+==============+=============+
|  qos0-p256-40K-0         |  0    |  256      |  4K X 10           |  0                  |  30k         |  100K       | 
+--------------------------+-------+-----------+--------------------+---------------------+--------------+-------------+
|  qos0-p1k-30K-0          |  0    |  1K       |  3K X 10           |  0                  |  25k         |  100K       |
+--------------------------+-------+-----------+--------------------+---------------------+--------------+-------------+
|  qos0-p10k-10K-0         |  0    |  10K      |  1K X 10           |  0                  |  5k          |  100K       |
+--------------------------+-------+-----------+--------------------+---------------------+--------------+-------------+
|  qos0-100k-1K-0          |  0    |  100K     |  1K X 1            |  0                  |  TODO        |  100K       |
+--------------------------+-------+-----------+--------------------+---------------------+--------------+-------------+

--------------------
QoS0 Fan-Out消息吞吐
--------------------

.. NOTE:: 本测试场景下无SUB客户端。

+--------------------------+-------+-----------+--------------------+---------------------+---------------+-------------+
|  组合场景ID              |  QoS  |  Payload  |  PUB连接 X Fan-In  |  SUB连接 X Fan-Out  |  实际Fan-Out  |  背景连接   |
+==========================+=======+===========+====================+=====================+===============+=============+
|  qos0-p256-4-40K         |  0    |  256      |  4 X 1             |  10K X 4            |  TODO         |  100K       |
+--------------------------+-------+-----------+--------------------+---------------------+---------------+-------------+
|  qos0-p1k-3-30K          |  0    |  1K       |  3 X 1             |  10K X 3            |  TODO         |  100K       |
+--------------------------+-------+-----------+--------------------+---------------------+---------------+-------------+
|  qos0-p10k-1-10K         |  0    |  10K      |  1 X 1             |  10K X 1            |  TODO         |  100K       |
+--------------------------+-------+-----------+--------------------+---------------------+---------------+-------------+
|  qos0-p100k-1-1K         |  0    |  100K     |  1 X 1             |  1K X 1             |  TODO         |  100K       |
+--------------------------+-------+-----------+--------------------+---------------------+---------------+-------------+

-------------------
QoS1 Fan-In消息吞吐
-------------------

      
.. NOTE:: 本测试场景下无SUB客户端。

+--------------------------+-------+-----------+--------------------+---------------------+--------------+-------------+
|  组合场景ID              |  QoS  |  Payload  |  PUB连接 X Fan-In  |  SUB连接 X Fan-Out  |  实际Fan-In  |  背景连接   |
+==========================+=======+===========+====================+=====================+==============+=============+
|  qos1-p256-40K-0         |  1    |  256      |  4K X 5            |  0                  |  TODO        |  100K       | 
+--------------------------+-------+-----------+--------------------+---------------------+--------------+-------------+
|  qos1-p1k-30K-0          |  1    |  1K       |  3K X 5            |  0                  |  TODO        |  100K       |
+--------------------------+-------+-----------+--------------------+---------------------+--------------+-------------+
|  qos1-p10k-10K-0         |  1    |  10K      |  1K X 5            |  0                  |  TODO        |  100K       |
+--------------------------+-------+-----------+--------------------+---------------------+--------------+-------------+
|  qos1-100k-1K-0          |  1    |  100K     |  500 X 1           |  0                  |  TODO        |  100K       |
+--------------------------+-------+-----------+--------------------+---------------------+--------------+-------------+
 

--------------------
QoS1 Fan-Out消息吞吐
--------------------

.. TODO:: 

--------------------
QoS2 Fan-In消息吞吐
--------------------

      
.. NOTE:: 本测试场景下无SUB客户端。

+--------------------------+-------+-----------+--------------------+---------------------+--------------+-------------+
|  组合场景ID              |  QoS  |  Payload  |  PUB连接 X Fan-In  |  SUB连接 X Fan-Out  |  实际Fan-In  |  背景连接   |
+==========================+=======+===========+====================+=====================+==============+=============+
|  qos2-p256-40K-0         |  2    |  256      |  4k X 3            |  0                  |  TODO        |  100K       | 
+--------------------------+-------+-----------+--------------------+---------------------+--------------+-------------+
|  qos2-p1k-30K-0          |  2    |  1K       |  3k X 3            |  0                  |  TODO        |  100K       |
+--------------------------+-------+-----------+--------------------+---------------------+--------------+-------------+
|  qos2-p10k-10K-0         |  2    |  10K      |  1k X 3            |  0                  |  TODO        |  100K       |
+--------------------------+-------+-----------+--------------------+---------------------+--------------+-------------+
|  qos2-100k-1K-0          |  2    |  100K     |  100 X 1           |  0                  |  TODO        |  100K       |
+--------------------------+-------+-----------+--------------------+---------------------+--------------+-------------+
 

------------
QoS2消息吞吐
------------

.. TODO:: 

--------
共享订阅
--------

QoS0共享订阅消费
---------------

.. TODO:: 

QoS1共享订阅消费
----------------

.. TODO:: 

QoS2共享订阅消费
----------------

.. TODO:: 

----------------
Fastlane消息吞吐
----------------

QoS0 Fastlane消费
-----------------

.. TODO:: 

QoS1 Fastlane消费
----------------

.. TODO:: 

QoS2 Fastlane消费
-----------------

.. TODO:: 

